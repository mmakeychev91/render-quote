// Маппинг сокращений книг Библии
const bookMapping = {
    'Мф': 'mf',
    'Лк': 'lk', 
    'Ин': 'in',
    'Мк': 'mk'
};

// Функция для форматирования номера главы/стиха (добавляет ведущий ноль)
const formatNumber = (num) => {
    return num.toString().padStart(2, '0');
};

// Функция для создания ссылки на библейский стих
const createBibleLink = (book, chapter, verse) => {
    const bookCode = bookMapping[book];
    if (!bookCode) return `(${book}. ${chapter}:${verse})`;
    
    const formattedChapter = formatNumber(chapter);
    const formattedVerse = formatNumber(verse);
    const url = `https://bible.optina.ru/new:${bookCode}:${formattedChapter}:${formattedVerse}`;
    
    return `<a href="${url}" target="_blank" class="bible-link">(${book}. ${chapter}:${verse})</a>`;
};

// Функция для обработки библейских ссылок в тексте
const processBibleReferences = (text) => {
    // Регулярное выражение для поиска библейских ссылок вида (Мф. 5:3) или (Мф.5:3)
    const bibleRefRegex = /\(([МфЛкИнМк]+)\.?\s*(\d+):(\d+(?:-\d+)?)\)/g;
    
    return text.replace(bibleRefRegex, (match, book, chapter, verse) => {
        // Если есть диапазон стихов (например, 15-17), берем только первый
        const firstVerse = verse.split('-')[0];
        return createBibleLink(book, chapter, firstVerse);
    });
};

// Массив текстов
const texts = [
    'Блаженны нищие духом, ибо их есть Царство Небесное (Мф. 5:3)',
    'Блаженны плачущие, ибо они утешатся (Мф. 5:4)',
    'Блаженны кроткие, ибо они наследуют землю (Мф. 5:5)',
    'Блаженны алчущие и жаждущие правды, ибо они насытятся (Мф. 5:6)',
    'Блаженны милостивые, ибо они помилованы будут (Мф. 5:7)',
    'Блаженны чистые сердцем, ибо они Бога узрят (Мф. 5:8)',
    'Блаженны миротворцы, ибо они будут наречены сынами Божиими (Мф. 5:9)',
    'Блаженны изгнанные за правду, ибо их есть Царство Небесное (Мф. 5:10)',
    'Блаженны вы, когда будут поносить вас и гнать и всячески неправедно злословить за Меня.Радуйтесь и веселитесь, ибо велика ваша награда на небесах: так гнали и пророков, бывших прежде вас (Мф. 5:11-12)',
    'Вы - соль земли. Если же соль потеряет силу, то чем сделаешь ее соленою? Она уже ни к чему негодна, как разве выбросить ее вон на попрание людям (Мф. 5:13)',
    'Так да светит свет ваш пред людьми, чтобы они видели ваши добрые дела и прославляли Отца вашего Небесного (Мф. 5:16)',
    'Итак, кто нарушит одну из заповедей сих малейших и научит так людей, тот малейшим наречется в Царстве Небесном; а кто сотворит и научит, тот великим наречется в Царстве Небесном (Мф. 5:19)',
    'Ибо, говорю вам, если праведность ваша не превзойдет праведности книжников и фарисеев, то вы не войдете в Царство Небесное (Мф. 5:20)',
    'Вы слышали, что сказано древним: не убивай, кто же убьет, подлежит суду. А Я говорю вам, что всякий, гневающийся на брата своего напрасно, подлежит суду; кто же скажет брату своему: "рака", подлежит синедриону; а кто скажет: "безумный", подлежит геенне огненной (Мф. 5:21-22)',
    'Итак, если ты принесешь дар твой к жертвеннику и там вспомнишь, что брат твой имеет что-нибудь против тебя, оставь там дар твой пред жертвенником, и пойди прежде примирись с братом твоим, и тогда приди и принеси дар твой (Мф. 5:23-24)',
    'Мирись с соперником твоим скорее, пока ты еще на пути с ним, чтобы соперник не отдал тебя судье, а судья не отдал бы тебя слуге, и не ввергли бы тебя в темницу. Истинно говорю тебе: ты не выйдешь оттуда, пока не отдашь до последнего кодранта (Мф. 5:25-26)',
    'Вы слышали, что сказано древним: не прелюбодействуй. А Я говорю вам, что всякий, кто смотрит на женщину с вожделением, уже прелюбодействовал с нею в сердце своем (Мф. 5:27-28)',
    'Если же правый глаз твой соблазняет тебя, вырви его и брось от себя, ибо лучше для тебя, чтобы погиб один из членов твоих, а не все тело твое было ввержено в геенну. И если правая твоя рука соблазняет тебя, отсеки ее и брось от себя, ибо лучше для тебя, чтобы погиб один из членов твоих, а не все тело твое было ввержено в геенну. (Мф. 5:29-30)',
    'Сказано также, что если кто разведется с женою своею, пусть даст ей разводную. А Я говорю вам: кто разводится с женою своею, кроме вины любодеяния, тот подает ей повод прелюбодействовать; и кто женится на разведенной, тот прелюбодействует (Мф. 5:31-32)',
    'Я говорю вам: не клянись вовсе: ни небом, потому что оно престол Божий; Ни землею, потому что она подножие ног Его; ни Иерусалимом, потому что он город великого Царя; Ни головою твоею не клянись, потому что не можешь ни одного волоса сделать белым или черным (Мф. 5:34-36)',
    'Да будет слово ваше: да, да; нет, нет; а что сверх этого, то от лукавого (Мф. 5:37)',
    'Я говорю вам: не противься злому. Но кто ударит тебя в правую щеку твою, обрати к нему и другую (Мф. 5:39)',
    'Кто захочет судиться с тобою и взять у тебя рубашку, отдай ему и верхнюю одежду (Мф. 5:40)',
    'Кто принудит тебя идти с ним одно поприще, иди с ним два (Мф. 5:41)',
    'Просящему у тебя дай, и от хотящего занять у тебя не отвращайся (Мф. 5:42)',
    'Я говорю вам: любите врагов ваших, благословляйте проклинающих вас, благотворите ненавидящим вас и молитесь за обижающих вас и гонящих вас, да будете сынами Отца вашего Небесного, ибо Он повелевает солнцу Своему восходить над злыми и добрыми и посылает дождь на праведных и неправедных (Мф. 5:44-45)',
    'Итак будьте совершенны, как совершен Отец ваш Небесный (Мф. 5:48)',
    'Смотрите, не творите милостыни вашей пред людьми с тем, чтобы они видели вас: иначе не будет вам награды от Отца вашего Небесного. Итак, когда творишь милостыню, не труби перед собою, как делают лицемеры в синагогах и на улицах, чтобы прославляли их люди. Истинно говорю вам: они уже получают награду свою. У тебя же, когда творишь милостыню, пусть левая рука твоя не знает, что делает правая, чтобы милостыня твоя была втайне; и Отец твой, видящий тайное, воздаст тебе явно (Мф. 6:1-4)',
    'И, когда молишься, не будь, как лицемеры, которые любят в синагогах и на углах улиц, останавливаясь, молиться, чтобы показаться перед людьми. Истинно говорю вам, что они уже получают награду свою. Ты же, когда молишься, войди в комнату твою и, затворив дверь твою, помолись Отцу твоему, Который втайне; и Отец твой, видящий тайное, воздаст тебе явно (Мф. 6:5-6)',
    'А молясь, не говорите лишнего, как язычники, ибо они думают, что в многословии своем будут услышаны; не уподобляйтесь им, ибо знает Отец ваш, в чем вы имеете нужду, прежде вашего прошения у Него (Мф. 6:7-8)',
    'Молитесь же так: Отче наш, сущий на небесах! да святится имя Твое; да приидет Царствие Твое; да будет воля Твоя и на земле, как на небе; хлеб наш насущный дай нам на сей день; и прости нам долги наши, как и мы прощаем должникам нашим; и не введи нас в искушение, но избавь нас от лукавого. Ибо Твое есть Царство и сила и слава во веки. Аминь (Мф. 6:9-13)',
    'Если вы будете прощать людям согрешения их, то простит и вам Отец ваш Небесный, а если не будете прощать людям согрешения их, то и Отец ваш не простит вам согрешений ваших (Мф. 6:14-15)',
    'Также, когда поститесь, не будьте унылы, как лицемеры, ибо они принимают на себя мрачные лица, чтобы показаться людям постящимися. Истинно говорю вам, что они уже получают награду свою. А ты, когда постишься, помажь голову твою и умой лице твое, чтобы явиться постящимся не пред людьми, но пред Отцом твоим, Который втайне; и Отец твой, видящий тайное, воздаст тебе явно(Мф. 6:16-18)',
    'Не собирайте себе сокровищ на земле, где моль и ржа истребляют и где воры подкапывают и крадут, но собирайте себе сокровища на небе, где ни моль, ни ржа не истребляют и где воры не подкапывают и не крадут, ибо где сокровище ваше, там будет и сердце ваше (Мф. 6:19-21)',
    'Светильник для тела есть око. Итак, если око твое будет чисто, то всё тело твое будет светло; если же око твое будет худо, то всё тело твое будет темно. Итак, если свет, который в тебе, тьма, то какова же тьма? (Мф. 6:22-23)',
    'Никто не может служить двум господам: ибо или одного будет ненавидеть, а другого любить; или одному станет усердствовать, а о другом нерадеть. Не можете служить Богу и маммоне (Мф. 6:24)',
    'Посему говорю вам: не заботьтесь для души вашей, что вам есть и что пить, ни для тела вашего, во что одеться. Душа не больше ли пищи, и тело одежды? Взгляните на птиц небесных: они ни сеют, ни жнут, ни собирают в житницы; и Отец ваш Небесный питает их. Вы не гораздо ли лучше их? Да и кто из вас, заботясь, может прибавить себе росту хотя на один локоть?(Мф. 6:25-27)',
    'И об одежде что заботитесь? Посмотрите на полевые лилии, как они растут: ни трудятся, ни прядут; но говорю вам, что и Соломон во всей славе своей не одевался так, как всякая из них; если же траву полевую, которая сегодня есть, а завтра будет брошена в печь, Бог так одевает, кольми паче вас, маловеры! (Мф. 6:28-30)',
    'Итак не заботьтесь и не говорите: что нам есть? или что пить? или во что одеться? потому что всего этого ищут язычники, и потому что Отец ваш Небесный знает, что вы имеете нужду во всем этом. Ищите же прежде Царства Божия и правды Его, и это все приложится вам. Итак не заботьтесь о завтрашнем дне, ибо завтрашний сам будет заботиться о своем: довольно для каждого дня своей заботы (Мф. 6:31-34)',
    'Не судите, да не судимы будете, ибо каким судом судите, таким будете судимы; и какою мерою мерите, такою и вам будут мерить. И что ты смотришь на сучок в глазе брата твоего, а бревна в твоем глазе не чувствуешь? Или как скажешь брату твоему: "дай, я выну сучок из глаза твоего", а вот, в твоем глазе бревно? Лицемер! вынь прежде бревно из твоего глаза и тогда увидишь, как вынуть сучок из глаза брата твоего (Мф. 7:1-5)',
    'Не давайте святыни псам и не бросайте жемчуга вашего перед свиньями, чтобы они не попрали его ногами своими и, обратившись, не растерзали вас. (Мф. 7:6)',
    'Просите, и дано будет вам; ищите, и найдете; стучите, и отворят вам; ибо всякий просящий получает, и ищущий находит, и стучащему отворят. Есть ли между вами такой человек, который, когда сын его попросит у него хлеба, подал бы ему камень? и когда попросит рыбы, подал бы ему змею? Итак если вы, будучи злы, умеете даяния благие давать детям вашим, тем более Отец ваш Небесный даст блага просящим у Него (Мф. 7:7-11)',
    'Итак во всем, как хотите, чтобы с вами поступали люди, так поступайте и вы с ними, ибо в этом закон и пророки (Мф. 7:12)',
    'Входите тесными вратами, потому что широки врата и пространен путь, ведущие в погибель, и многие идут ими; потому что тесны врата и узок путь, ведущие в жизнь, и немногие находят их (Мф. 7:13-14)',
    'Берегитесь лжепророков, которые приходят к вам в овечьей одежде, а внутри суть волки хищные. По плодам их узнаете их. Собирают ли с терновника виноград, или с репейника смоквы? Так всякое дерево доброе приносит и плоды добрые, а худое дерево приносит и плоды худые.(Мф. 7:15-17)', 'Не всякий, говорящий Мне: "Господи! Господи!", войдет в Царство Небесное, но исполняющий волю Отца Моего Небесного.(Мф. 7:21)', 'И тогда объявлю им: Я никогда не знал вас; отойдите от Меня, делающие беззаконие.(Мф. 7:23)', 'Другой же из учеников Его сказал Ему: Господи! позволь мне прежде пойти и похоронить отца моего.Но Иисус сказал ему: иди за Мною, и предоставь мертвым погребать своих мертвецов.(Мф.8:21-22),', 'И вот, сделалось великое волнение на море, так что лодка покрывалась волнами; а Он спал. Тогда ученики Его, подойдя к Нему, разбудили Его и сказали: Господи! спаси нас, погибаем. И говорит им: что вы так боязливы, маловерные? Потом, встав, запретил ветрам и морю, и сделалась великая тишина.(Мф.8:24-26)', 'Проходя оттуда, Иисус увидел человека, сидящего у сбора пошлин, по имени Матфея, и говорит ему: следуй за Мною. И он встал и последовал за Ним.(Мф.9:9)', 'Увидев то, фарисеи сказали ученикам Его: для чего Учитель ваш ест и пьет с мытарями и грешниками? Иисус же, услышав это, сказал им: не здоровые имеют нужду во враче, но больные, пойдите, научитесь, что значит: милости хочу, а не жертвы? Ибо Я пришел призвать не праведников, но грешников к покаянию.(Мф.8:11-12)', 'И сказал им Иисус: могут ли печалиться сыны чертога брачного, пока с ними жених? Но придут дни, когда отнимется у них жених, и тогда будут поститься.(Мф. 8:15)', 'И никто к ветхой одежде не приставляет заплаты из небеленой ткани, ибо вновь пришитое отдерет от старого, и дыра будет еще хуже.Не вливают также вина молодого в мехи ветхие; а иначе прорываются мехи, и вино вытекает, и мехи пропадают, но вино молодое вливают в новые мехи, и сберегается то и другое.(Мф.8:16-17)', 'Тогда говорит ученикам Своим: жатвы много, а делателей мало; итак молите Господина жатвы, чтобы выслал делателей на жатву Свою.(Мф.9:37)','Ходя же, проповедуйте, что приблизилось Царство Небесное; больных исцеляйте, прокаженных очищайте, мертвых воскрешайте, бесов изгоняйте; даром получили, даром давайте.(Мф.10:7)','Не берите с собою ни золота, ни серебра, ни меди в поясы свои, ни сумы на дорогу, ни двух одежд, ни обуви, ни посоха, ибо трудящийся достоин пропитания.(Мф.10:10)','а входя в дом, приветствуйте его, говоря: мир дому сему; и если дом будет достоин, то мир ваш придет на него; если же не будет достоин, то мир ваш к вам возвратится. А если кто не примет вас и не послушает слов ваших, то, выходя из дома или из города того, отрясите прах от ног ваших (Мф.10:12)', 'Вот, Я посылаю вас, как овец среди волков: итак будьте мудры, как змии, и просты, как голуби.(Мф.10:16)','Когда же будут предавать вас, не заботьтесь, как или что сказать; ибо в тот час дано будет вам, что сказать, ибо не вы будете говорить, но Дух Отца вашего будет говорить в вас.(Мф.10:19)','и будете ненавидимы всеми за имя Мое; претерпевший же до конца спасется.(Мф.10:22)','Когда же будут гнать вас в одном городе, бегите в другой. Ибо истинно говорю вам: не успеете обойти городов Израилевых, как приидет Сын Человеческий.(Мф.10:23)','Ученик не выше учителя, и слуга не выше господина своего: довольно для ученика, чтобы он был, как учитель его, и для слуги, чтобы он был, как господин его. Если хозяина дома назвали веельзевулом, не тем ли более домашних его? Итак не бойтесь их, ибо нет ничего сокровенного, что не открылось бы, и тайного, что не было бы узнано.(Мф.10:25)','Что говорю вам в темноте, говорите при свете; и что на ухо слышите, проповедуйте на кровлях.(Мф.10:27)','И не бойтесь убивающих тело, души же не могущих убить; а бойтесь более Того, Кто может и душу и тело погубить в геенне.(Мф.10:28)','Не две ли малые птицы продаются за ассарий? И ни одна из них не упадет на землю без воли Отца вашего; у вас же и волосы на голове все сочтены; не бойтесь же: вы лучше многих малых птиц.(Мф.10:29)','Итак всякого, кто исповедает Меня пред людьми, того исповедаю и Я пред Отцем Моим Небесным; а кто отречется от Меня пред людьми, отрекусь от того и Я пред Отцем Моим Небесным.(Мф.10:32)','Не думайте, что Я пришел принести мир на землю; не мир пришел Я принести, но меч, ибо Я пришел разделить человека с отцом его, и дочь с матерью ее, и невестку со свекровью ее. И враги человеку - домашние его.(Мф.10:34)','Кто любит отца или мать более, нежели Меня, не достоин Меня; и кто любит сына или дочь более, нежели Меня, не достоин Меня;(Мф.10:37)','и кто не берет креста своего и следует за Мною, тот не достоин Меня.(Мф.10:38)','Сберегший душу свою потеряет ее; а потерявший душу свою ради Меня сбережет ее.(Мф.10:39)','Кто принимает вас, принимает Меня, а кто принимает Меня, принимает Пославшего Меня;(Мф.10:40)','кто принимает пророка, во имя пророка, получит награду пророка; и кто принимает праведника, во имя праведника, получит награду праведника.(Мф.10:41)','И кто напоит одного из малых сих только чашею холодной воды, во имя ученика, истинно говорю вам, не потеряет награды своей.(Мф.10:42)','слепые прозревают и хромые ходят, прокаженные очищаются и глухие слышат, мертвые воскресают и нищие благовествуют; и блажен, кто не соблазнится о Мне.(Мф.11:5)','От дней же Иоанна Крестителя доныне Царство Небесное силою берется, и употребляющие усилие восхищают его(Мф.11:12)','возьмите иго Мое на себя и научитесь от Меня, ибо Я кроток и смирен сердцем, и найдете покой душам вашим;(Мф.11:29)','Кто не со Мною, тот против Меня; и кто не собирает со Мною, тот расточает.(Мф.12:30)','Посему говорю вам: всякий грех и хула простятся человекам, а хула на Духа не простится человекам;если кто скажет слово на Сына Человеческого, простится ему; если же кто скажет на Духа Святаго, не простится ему ни в сем веке, ни в будущем.(Мф.12:31)','Или признайте дерево хорошим и плод его хорошим; или признайте дерево худым и плод его худым, ибо дерево познается по плоду.(Мф.12:33)','Говорю же вам, что за всякое праздное слово, какое скажут люди, дадут они ответ в день суда: ибо от слов своих оправдаешься, и от слов своих осудишься.(Мф.12:36)','ибо, кто будет исполнять волю Отца Моего Небесного, тот Мне брат, и сестра, и матерь.(Мф.12:50)','ибо кто имеет, тому дано будет и приумножится, а кто не имеет, у того отнимется и то, что имеет;(Мф.13:12)','Еще подобно Царство Небесное сокровищу, скрытому на поле, которое, найдя, человек утаил, и от радости о нем идет и продает всё, что имеет, и покупает поле то.(Мф.13:44)','Еще подобно Царство Небесное купцу, ищущему хороших жемчужин, который, найдя одну драгоценную жемчужину, пошел и продал всё, что имел, и купил ее.(Мф.13:45)','Но Иисус тотчас заговорил с ними и сказал: ободритесь; это Я, не бойтесь.(Мф.14:27)','Иисус тотчас простер руку, поддержал его и говорит ему: маловерный! зачем ты усомнился?(Мф.14:31)','не то, что входит в уста, оскверняет человека, но то, что выходит из уст, оскверняет человека.(Мф.15:11)','Иисус сказал им: смотрите, берегитесь закваски фарисейской и саддукейской.(Мф.16:6)','Тогда Иисус сказал ученикам Своим: если кто хочет идти за Мною, отвергнись себя, и возьми крест свой, и следуй за Мною(Мф.16:24)','ибо кто хочет душу  свою сберечь, тот потеряет ее, а кто потеряет душу свою ради Меня, тот обретет ее(Мф.16:25)','сей же род изгоняется только молитвою и постом.(Мф.17:21)','и сказал: истинно говорю вам, если не обратитесь и не будете как дети, не войдете в Царство Небесное;итак, кто умалится, как это дитя, тот и больше в Царстве Небесном(Мф.18:3)','и кто примет одно такое дитя во имя Мое, тот Меня принимает(Мф.18:5)','а кто соблазнит одного из малых сих, верующих в Меня, тому лучше было бы, если бы повесили ему мельничный жернов на шею и потопили его во глубине морской. Горе миру от соблазнов, ибо надобно прийти соблазнам; но горе тому человеку, через которого соблазн приходит.(Мф.18:6)','Если же рука твоя или нога твоя соблазняет тебя, отсеки их и брось от себя: лучше тебе войти в жизнь без руки или без ноги, нежели с двумя руками и с двумя ногами быть ввержену в огонь вечный;и если глаз твой соблазняет тебя, вырви его и брось от себя: лучше тебе с одним глазом войти в жизнь, нежели с двумя глазами быть ввержену в геенну огненную.(Мф.18:8)','Смотрите, не презирайте ни одного из малых сих; ибо говорю вам, что Ангелы их на небесах всегда видят лице Отца Моего Небесного. Ибо Сын Человеческий пришел взыскать и спасти погибшее.(Мф.18:10)','Если же согрешит против тебя брат твой, пойди и обличи его между тобою и им одним; если послушает тебя, то приобрел ты брата твоего; если же не послушает, возьми с собою еще одного или двух, дабы устами двух или трех свидетелей подтвердилось всякое слово; если же не послушает их, скажи церкви; а если и церкви не послушает, то да будет он тебе, как язычник и мытарь.(Мф.18:15)','Тогда Петр приступил к Нему и сказал: Господи! сколько раз прощать брату моему, согрешающему против меня? до семи ли раз? Иисус говорит ему: не говорю тебе: до семи, но до седмижды семидесяти раз.(Мф.18:21)','Посему Царство Небесное подобно царю, который захотел сосчитаться с рабами своими; когда начал он считаться, приведен был к нему некто, который должен был ему десять тысяч талантов;а как он не имел, чем заплатить, то государь его приказал продать его, и жену его, и детей, и всё, что он имел, и заплатить;тогда раб тот пал, и, кланяясь ему, говорил: государь! потерпи на мне, и всё тебе заплачу.Государь, умилосердившись над рабом тем, отпустил его и долг простил ему.Раб же тот, выйдя, нашел одного из товарищей своих, который должен был ему сто динариев, и, схватив его, душил, говоря: отдай мне, что должен.Тогда товарищ его пал к ногам его, умолял его и говорил: потерпи на мне, и всё отдам тебе.Но тот не захотел, а пошел и посадил его в темницу, пока не отдаст долга.Товарищи его, видев происшедшее, очень огорчились и, придя, рассказали государю своему всё бывшее.Тогда государь его призывает его и говорит: злой раб! весь долг тот я простил тебе, потому что ты упросил меня;не надлежало ли и тебе помиловать товарища твоего, как и я помиловал тебя?И, разгневавшись, государь его отдал его истязателям, пока не отдаст ему всего долга.Так и Отец Мой Небесный поступит с вами, если не простит каждый из вас от сердца своего брату своему согрешений его.(Мф.18:23)','И сказал: посему оставит человек отца и мать и прилепится к жене своей, и будут два одною плотью, так что они уже не двое, но одна плоть. Итак, что Бог сочетал, того человек да не разлучает.(Мф.19:5)','но Я говорю вам: кто разведется с женою своею не за прелюбодеяние и женится на другой, тот прелюбодействует; и женившийся на разведенной прелюбодействует.(Мф.19:9)','Но Иисус сказал: пустите детей и не препятствуйте им приходить ко Мне, ибо таковых есть Царство Небесное.(Мф.19:14)','Иисус же сказал: не убивай; не прелюбодействуй; не кради; не лжесвидетельствуй;почитай отца и мать; и: люби ближнего твоего, как самого себя.(Мф.19:18)','Иисус сказал ему: если хочешь быть совершенным, пойди, продай имение твое и раздай нищим; и будешь иметь сокровище на небесах; и приходи и следуй за Мною.(Мф.19:21)'
];

const textContainer = document.getElementById('text-container');
const renderButton = document.getElementById('render-button');
const infoButton = document.getElementById('info-button');
const infoPopup = document.getElementById('info-popup');
const popupClose = document.querySelector('.popup-close');

// Функция для рендеринга случайного текста без повторений
const renderRandomText = () => {
    if (texts.length === 0) {
        // Обновляем страницу, если все тексты были показаны
        location.reload();
        return;
    }

    const randomIndex = Math.floor(Math.random() * texts.length);
    const randomText = texts[randomIndex];

    // Обрабатываем библейские ссылки и рендерим как HTML
    const processedText = processBibleReferences(randomText);
    textContainer.innerHTML = processedText;

    // Удаляем использованный текст из массива
    texts.splice(randomIndex, 1);
}

// Функция для открытия попапа
const openPopup = () => {
    infoPopup.classList.add('active');
    document.body.style.overflow = 'hidden'; // Блокируем скролл страницы
}

// Функция для закрытия попапа
const closePopup = () => {
    infoPopup.classList.remove('active');
    document.body.style.overflow = ''; // Разблокируем скролл страницы
}

// Обработчики событий
renderButton.addEventListener('click', renderRandomText);

// Открытие попапа по клику на кнопку с вопросом
infoButton.addEventListener('click', openPopup);

// Закрытие попапа по клику на кнопку закрытия
popupClose.addEventListener('click', closePopup);

// Закрытие попапа по клику на overlay (фон)
infoPopup.addEventListener('click', (e) => {
    if (e.target === infoPopup) {
        closePopup();
    }
});

// Закрытие попапа по нажатию клавиши Escape
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && infoPopup.classList.contains('active')) {
        closePopup();
    }
});

// Показываем случайную заповедь при загрузке страницы
renderRandomText();
